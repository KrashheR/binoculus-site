document.querySelectorAll('a[href^="#"').forEach(t=>{t.addEventListener("click",function(t){t.preventDefault();t=this.getAttribute("href").substring(1),t=document.getElementById(t).getBoundingClientRect().top;window.scrollBy({top:t,behavior:"smooth"})})});let products=[],cartItems=[];function handleCartState(){document.querySelector(".cart").classList.toggle("cart_visible")}function initCartOpenBtn(){document.querySelector(".cart__open-btn").addEventListener("click",handleCartState)}function initCartCloseBtn(){document.querySelector(".cart").addEventListener("click",t=>{t.target.classList.contains("cart__close-btn")&&handleCartState()})}function initCartPurchaseBtn(){document.querySelector(".cart__purchase").addEventListener("click",handlePurchaseState)}function handlePurchaseState(){document.querySelector("#contactCart").classList.toggle("contact_visible"),handleCartState()}function updateCartDisplay(t){var e=document.querySelector(".cart__empty"),n=document.querySelector(".cart__sum"),a=document.querySelector(".navigation__cart-number"),c=document.querySelector(".cart__purchase");0!==t.length?(e.style.display="none",n.style.display="block",a.classList.add("navigation__cart-number_on"),c.style.display="block"):(e.style.display="flex",n.style.display="none",c.style.display="none",a.classList.remove("navigation__cart-number_on"));const i=document.querySelector(".cart__list");i.innerHTML="";let o=0,r=0;t.forEach(t=>{var e=document.createElement("li");e.classList.add("cart__item"),e.setAttribute("data-product-id",t.id),e.innerHTML=`
      <img class="cart__item-img" src="${t.image}" alt="${t.name}">
      <p class="cart__item-name">${t.name}</p>
      <span class="cart__item-quantity">
        <button class="cart__quantity-button cart__quantity-button_minus">-</button>
        <span class="cart__quantity-num">${t.quantity}</span>
        <button class="cart__quantity-button cart__quantity-button_plus">+</button>
      </span>
      <span class="cart__item-price">$${t.price}</span>
    `,o+=t.price*t.quantity,r+=t.quantity,i.append(e)}),a.textContent=r,document.querySelector(".cart__sum-result").innerHTML="$"+o.toFixed(2)}function initQuantityButtons(){document.querySelector(".cart__list").addEventListener("click",t=>{var e=t.target.closest(".cart__item").dataset.productId;t.target.classList.contains("cart__quantity-button_plus")?updateCartItemQuantity(e,1):t.target.classList.contains("cart__quantity-button_minus")&&updateCartItemQuantity(e,-1)})}function updateCartItemQuantity(e,t){var n=cartItems.find(t=>t.id===e);n&&(n.quantity+=t,n.quantity<=0&&(t=cartItems.indexOf(n),cartItems.splice(t,1)),updateCartDisplay(cartItems))}function isValidPhoneNumber(t){return/^(?:\+7|8)\d{10}$/.test(t)}function closeContactCart(){document.getElementById("contactCart").classList.toggle("contact_visible")}function handleFormSubmission(t){var e=document.querySelector(".contact__phone");t.preventDefault(),isValidPhoneNumber(e.value)?(showModal("Менеджер свяжется с вами в течение 5-10 минут!"),closeContactCart()):showModal("Введите корректный номер телефона!")}function initEventListeners(){var t=document.querySelector(".contact__close-btn"),e=document.querySelector(".contact__button");t.addEventListener("click",closeContactCart),e.addEventListener("click",handleFormSubmission)}function showModal(t){var e=document.getElementById("modalCart");e.querySelector(".modal__message").textContent=t,e.style.display="flex"}function initEmailForm(){var t=document.querySelector(".email-form");const e=document.getElementById("modalEmail");t.addEventListener("submit",t=>handleEmailFormSubmit(t,e))}function handleEmailFormSubmit(t,e){t.preventDefault(),e.style.display="flex"}function hideModal(t){t=t.target.closest(".modal");t&&(t.style.display="none")}fetch("data/products.json").then(t=>t.json()).then(t=>{products=t}).catch(t=>console.error("Error loading products:",t)),document.querySelectorAll(".buy-button").forEach(t=>{t.addEventListener("click",function(t){t.preventDefault();const e=this.dataset.productId;var n,t=products.find(t=>t.id===e);t?((n=cartItems.find(t=>t.id===e))?n.quantity+=1:cartItems.push({id:t.id,name:t.name,price:t.price,image:t.image,quantity:1}),updateCartDisplay(cartItems)):console.error(`Product with ID ${e} not found`)})}),document.addEventListener("DOMContentLoaded",()=>{initCartOpenBtn(),initCartCloseBtn(),initQuantityButtons(),initCartPurchaseBtn(),updateCartDisplay([])}),document.addEventListener("DOMContentLoaded",()=>{initEventListeners()}),document.addEventListener("DOMContentLoaded",()=>{initEmailForm()}),document.querySelectorAll(".modal__button").forEach(t=>{t.addEventListener("click",hideModal)});const navigationHamburger=document.querySelector(".navigation__hamburger"),navigationList=document.querySelector(".navigation__list"),tabItems=(navigationHamburger.addEventListener("click",()=>{navigationList.classList.toggle("navigation__list_active")}),document.querySelectorAll(".tabs__buttons-item")),tabContents=document.querySelectorAll(".tabs__content-item");function openTab(t){var t=t.currentTarget,e=t.dataset["button"];tabItems.forEach(t=>{t.classList.remove("tabs__buttons-item_active")}),tabContents.forEach(t=>{t.classList.remove("tabs__content-item_active")}),t.classList.add("tabs__buttons-item_active"),document.querySelector("#"+e).classList.add("tabs__content-item_active")}tabItems.forEach(t=>{t.addEventListener("click",openTab)});